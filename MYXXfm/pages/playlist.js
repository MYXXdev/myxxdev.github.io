!function(orbp_w){"use strict";orbp_w.init=function(wId){var self=this,apiUrl=this.apiUrl||"https://onlineradiobox.com",trackServer="//scraper.onlineradiobox.com/",wDiv=document.getElementById(wId);if(wDiv){for(var playButton=wDiv.getElementsByTagName("button"),i=0;i<playButton.length;i++)if(playButton[i].getAttribute("country")&&playButton[i].getAttribute("alias")){playButton=playButton[i];break}var tryAutoplay=function(){var isMobile;"autoplay"==playButton.getAttribute("autoplay")&&(isMobile=!1,(isMobile=!(!/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())&&!/Mobi/i.test(navigator.userAgent.toLowerCase()))||isMobile)||function(){try{var audio=new Audio,src=audio.canPlayType("audio/ogg")?"data:audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA=":"data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";audio.autoplay=!0,audio.onplay=function(){playButton.click()},audio.src=src}catch(e){console.log("[AUTOPLAY-ERROR]",e)}}())},country=playButton.getAttribute("country"),alias=playButton.getAttribute("alias");console.log("Init player: ",wId,country,alias,trackServer);var autoplayTried,trackSpan=wDiv.getElementsByTagName("span")[1],orbF=wId+"_p",p=document.getElementById(orbF);window.mejs&&p.player&&p.player.$media&&p.player.remove(),p=this.videojs(orbF,{height:"1px",width:"1px",autoplay:!1,controls:null,playsinline:!0}),wDiv.inited||(wDiv.inited=!0,playButton.className="orbPp",console.log("Re-init player: "+wId),autoplayTried=!1,p.ready(function(){var player=this;document.getElementById(wId+"_p").style.visibility="hidden",p.reset();function stop(){playButton.className="orbPp",p.pause(),p.reset(),trackSpan.innerHTML=""}var showTrackUpdated=0,sameTrackTime=0,showTrack=function(){var xmlhttp;"orbPs"!=playButton.className&&!self.showTrackOnStop||((xmlhttp=new XMLHttpRequest).onreadystatechange=function(){if(("orbPs"==playButton.className||self.showTrackOnStop)&&4==xmlhttp.readyState&&xmlhttp.readyState==XMLHttpRequest.DONE)if(200==xmlhttp.status){var data=JSON.parse(xmlhttp.responseText);if(console.log("Track response:",data),0!=data.updated){if(data.updated==showTrackUpdated){if(1<sameTrackTime)return;sameTrackTime++}else sameTrackTime=0;data.trackId?trackSpan.innerHTML="<a href='https://onlineradiobox.com/track/"+data.trackId+"/' class='orbPtt' target='_blank'>"+data.title+"</a>":trackSpan.innerHTML="<ins>"+data.title+"</ins>",showTrackUpdated=data.updated,setTimeout(function(){showTrack()},1e3)}}else console.log("Wrong http status: ",xmlhttp.status),setTimeout(function(){showTrack()},12e4)},xmlhttp.open("GET",trackServer+country+"."+alias+"?l="+showTrackUpdated,!0),xmlhttp.send())},lastPing=0;player.on("error",function(error){error.stopImmediatePropagation();error=this.player().error();console.log("Player error:",error),player.geoBlockedText?(trackSpan.innerHTML="<ins>"+player.geoBlockedText+"</ins>",playButton.className="orbPp",p.pause()):(4==error.code?trackSpan.innerHTML="<ins>"+trackSpan.getAttribute("not_supported")+"</ins>":trackSpan.innerHTML="<ins>"+trackSpan.getAttribute("error")+"</ins>",stop())}),player.on("loadedmetadata",function(){console.log("loadedmetadata")}),player.on("loadeddata",function(){console.log("loadeddata"),showTrackUpdated=0,trackSpan.innerHTML="<ins>"+trackSpan.getAttribute("playing")+"</ins>",showTrack()}),player.on("timeupdate",function(){var xmlhttp;"orbPs"==playButton.className&&((xmlhttp=(new Date).getTime()/1e3)-300<lastPing||(lastPing=xmlhttp,(xmlhttp=new XMLHttpRequest).open("GET","//onlineradiobox.com/ping/"+country+"."+alias,!0),xmlhttp.send()))}),"true"===playButton.getAttribute("popup")&&(self.showTrackOnStop=!0,showTrack()),playButton.addEventListener("click",function(){var url,width,height,title;"true"!==this.getAttribute("popup")?(console.log("Play"),"orbPs"!=this.className?(this.className="orbPs",country=playButton.getAttribute("country"),alias=playButton.getAttribute("alias"),title=playButton.getAttribute("stream")||1,function(apiUrl,country,alias,srcUrl,streamType,callback){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==this.DONE){if(200!=xmlhttp.status)return callback(srcUrl,streamType,!1,!1);var dimension=JSON.parse(xmlhttp.responseText),url="http:"==dimension.streamURL.slice(0,5);if(!("https:"==location.protocol&&url))return callback(dimension.streamURL,dimension.streamType,dimension.isGeoBlocked,dimension.isRestricted);url=country+"/"+alias,dimension="";/(android)/i.test(navigator.userAgent)?dimension="&os=android":/(iphone|ipad)/i.test(navigator.userAgent)&&(dimension="&os=ios");url=apiUrl.replace(/^.*\/\//,"http://p.")+"/"+url+"/player/?played=1&cs="+country+"."+alias+dimension+"&from_widget=1",dimension="left="+(window.outerWidth/2-170)+",width=340,height=520";self.popup=window.open(url,"orb_player",dimension+",toolbar=1,location=1,resizable=1,status=1,menubar=1")}},xmlhttp.open("GET",apiUrl+"/json/"+country+"/"+alias+"/widget/",!0),xmlhttp.send()}(apiUrl,country,alias,apiUrl+"/json/"+country+"/"+alias+"/play?platform=web",title,function(stremUrl,streamType,isGeoBlocked,isRestricted){var geoBlockedText=(geoBlockedText=trackSpan.getAttribute("geo_blocked"))||"Not available in your country";if(isGeoBlocked&&(player.geoBlockedText=geoBlockedText),isRestricted)trackSpan.innerHTML="<ins>"+geoBlockedText+"</ins>";else{var s,t,src={};switch(streamType=streamType||1){case 1:src={type:"audio/mp3",src:stremUrl};break;case 2:src={type:"audio/mp4",src:stremUrl};break;case 5:src={type:"application/x-mpegURL",src:stremUrl,handleManifestRedirects:!0};break;case 6:src={type:"application/dash+xml",src:stremUrl,handleManifestRedirects:!0}}5!=streamType||window.Hls?"6"!=streamType||window.dashjs?(p.src(src),p.play()):((s=document.createElement("script")).type="text/javascript",-1!==orbp_w.cdnUrl.indexOf(".local")?s.src=orbp_w.cdnUrl+"/js/videojs-contrib-dash.js":s.src=orbp_w.cdnUrl+"/js/videojs-contrib-dash.min.d3846507.js",s.onload=function(){p.src(src),p.play()},(t=document.getElementsByTagName("script"))[0].parentNode.insertBefore(s,t[0])):((s=document.createElement("script")).type="text/javascript",-1!==orbp_w.cdnUrl.indexOf(".local")?s.src=orbp_w.cdnUrl+"/js/hls.js":s.src=orbp_w.cdnUrl+"/js/hls.min.a0ffeac4.js",s.onload=function(){p.src(src),p.play()},(t=document.getElementsByTagName("script"))[0].parentNode.insertBefore(s,t[0]))}}),trackSpan.innerHTML="<ins>"+trackSpan.getAttribute("loading")+"</ins>"):stop()):(url=this.getAttribute("popupurl"),width=this.getAttribute("popupw"),height=this.getAttribute("popuph"),title=this.getAttribute("alias"),window.open(url,title,"width="+width+",height="+height))}),autoplayTried||(tryAutoplay(),autoplayTried=!0)}));orbF=wDiv.getElementsByClassName("orbV");0!=orbF.length&&this.volumeControl(orbF[0],p,wDiv.getAttribute("vlm"));orbF=wDiv.getElementsByClassName("orbF");0!=orbF.length&&this.flags(orbF[0],country,alias,wDiv);var loadPl,orbIL=wDiv.getElementsByClassName("orbPpl");0!=orbIL.length&&(orbIL=orbIL[0],wDiv.plTimeoutSet&&(console.log("Clear PL timeout"),clearTimeout(wDiv.plTimeoutSet)),wDiv.plTimeoutSet=null,(loadPl=function(day){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE&&200==xmlhttp.status){for(var data=JSON.parse(xmlhttp.responseText);orbIL.lastChild;)orbIL.removeChild(orbIL.lastChild);for(var t=0;t<data.playlist.length;t++){var track=data.playlist[t],li=document.createElement("li"),trackTime=new Date(1e3*track.created),trackTime=(9<trackTime.getHours()?trackTime.getHours():"0"+trackTime.getHours())+":"+(9<trackTime.getMinutes()?trackTime.getMinutes():"0"+trackTime.getMinutes());data.currentTrackId&&track.id==data.currentTrackId?li.className="orbPpli a":li.className="orbPpli",track.id&&track.id.length?li.innerHTML='<a href="https://onlineradiobox.com/track/'+track.id+'/" target="_blank"><time>'+trackTime+"</time> "+track.name+"</a>":li.innerHTML="<span><time>"+trackTime+"</time> "+track.name+"</span>",orbIL.appendChild(li)}wDiv.plTimeoutSet||(wDiv.plTimeoutSet=setTimeout(function(){wDiv.plTimeoutSet=null,loadPl(0)},9e4))}},xmlhttp.open("GET","//onlineradiobox.com/json/"+country+"/"+alias+"/playlist/"+day+"?tz="+(new Date).getTimezoneOffset()+"&rnd="+Math.random(),!0),xmlhttp.send()})(0))}else console.log("Couldn't find player widget div: "+wId)},orbp_w.baseLI=function(){var li=document.createElement("li");li.className="orbFli";var div=document.createElement("div");return div.className="orbFlif",div.style.float="left",div.style.width="27px",div.style.height="18px",div.style["margin-right"]="5px",1<window.devicePixelRatio?(div.style.background="url("+orbp_w.cdnUrl+"/img/flags_spr@2x.png)no-repeat",div.style["background-size"]="27px 4266px"):div.style.background="url("+orbp_w.cdnUrl+"/img/flags_spr.png)no-repeat",li.appendChild(div),li},orbp_w.flags=function(orbF,country,alias,wDiv){var baseElement,loadFlags;orbF.getAttribute("unchecked")||(wDiv.flagTimeoutSet&&(console.log("Clear flag timeout"),clearTimeout(wDiv.flagTimeoutSet)),wDiv.flagTimeoutSet=null,baseElement=orbp_w.baseLI(),(loadFlags=function(){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE&&200==xmlhttp.status){for(var data=JSON.parse(xmlhttp.responseText);orbF.lastChild;)orbF.removeChild(orbF.lastChild);if(data.total){orbF.style.display="";var div=document.createElement("div");if(div.className="orbFh",div.innerHTML='<i class="orbFhi"></i>'+data.total+":",orbF.appendChild(div),data.stats){var ul=document.createElement("ul");ul.className="orbFl";for(var t=0;t<data.stats.length;t++){var l=baseElement.cloneNode(!0),d=l.getElementsByTagName("div")[0],stat=data.stats[t],flagY=18*(stat.id-1);d.style["background-position"]="0px "+-flagY+"px",l.title=stat.c.toUpperCase(),l.innerHTML+=stat.l,ul.appendChild(l)}orbF.appendChild(ul),wDiv.flagTimeoutSet||(wDiv.flagTimeoutSet=setTimeout(function(){wDiv.flagTimeoutSet=null,loadFlags()},3e5))}}else orbF.style.display="none"}},xmlhttp.open("GET","//onlineradiobox.com/json/"+country+"/"+alias+"/geo?rnd="+Math.random(),!0),xmlhttp.send()})())},orbp_w.volumeControl=function(matchVolume,player,currentVolume){var orbVCs,orbVCI,muted,orbVb,setWidgetVolume,setVolume,element,slider,startX,bindElement,orbVC=matchVolume.getElementsByClassName("orbVC");function mousemove(x){x.stopPropagation(),x.preventDefault();var width=element.offsetWidth,x=x.pageX-startX+slider.offsetWidth/2;return x<0?x=0:width<x&&(x=width),setVolume(x/width),!1}function mouseup(event){return event.stopPropagation(),event.preventDefault(),bindElement.removeEventListener("mousemove",mousemove),bindElement.removeEventListener("mouseup",mouseup),!1}0!=orbVC.length&&(orbVC=orbVC[0],0!=(orbVCs=matchVolume.getElementsByClassName("orbVCs")).length&&(orbVCs=orbVCs[0],0!=(orbVCI=matchVolume.getElementsByTagName("i")).length&&(orbVCI=orbVCI[0],0!=(orbVb=matchVolume.getElementsByClassName("orbVb")).length&&(matchVolume=document.cookie.match(new RegExp("vlm=([^;]+)")),currentVolume=matchVolume?parseFloat(matchVolume[1]):currentVolume||.8,muted=!1,(orbVb=orbVb[0]).addEventListener("click",function(){muted=muted?!(orbVCI.className="_m"):!(orbVCI.className=""),player.muted(muted)}),setWidgetVolume=new Event("setWidgetVolume"),(setVolume=function(volume){orbVCs.dispatchEvent(setWidgetVolume),console.log("setVolume:",volume),currentVolume=volume,player.volume(volume),orbVCs.style.left=100*volume+"%",orbVCI.className=0<volume&&!muted?"_m":"";var expires=new Date;expires.setTime(expires.getTime()+31104e6),document.cookie="vlm="+volume+";path=/;expires="+expires.toUTCString()})(currentVolume),element=orbVC,slider=orbVCs,startX=0,bindElement=window.document.documentElement,element.addEventListener("click",function(x){if((x.target||x.srcElement)==this){x.stopPropagation(),x.preventDefault();var width=element.offsetWidth,x=x.offsetX;return width<x?x=width:x<0&&(x=0),setVolume(x/width),!1}}),slider.addEventListener("mousedown",function(event){return event.stopPropagation(),event.preventDefault(),startX=event.pageX-slider.offsetLeft,bindElement.addEventListener("mousemove",mousemove),bindElement.addEventListener("mouseup",mouseup),!1})))))},orbp_w.runCmd=function(){for(;0<this.cmd.length;)this.cmd.shift()()},orbp_w.start=function(){if(!orbp_w.inited){var s,t;orbp_w.inited=!0,t=document.getElementsByTagName("script"),orbp_w.cdnUrl="";for(var i=0;i<t.length;i++){var m=t[i].getAttribute("src");if(m&&-1!==m.indexOf("radiobox.")&&-1!==m.indexOf("/js/pwidget2.")){m=m.match(/^(https?:)?\/\/(([^:/?#]*)(?:\:([0-9]+))?)/);if(m){orbp_w.cdnUrl="//"+m[2];break}}}orbp_w.cdnUrl||console.log("Can't find CDN url: ",t),(s=document.createElement("script")).type="text/javascript",-1!==orbp_w.cdnUrl.indexOf(".local")?s.src=orbp_w.cdnUrl+"/js/videojs-7.8.4.js":s.src=orbp_w.cdnUrl+"/js/videojs-7.8.4.min.26a26e10.js","function"==typeof require&&"function"==typeof define&&define.amd?(define("global/window",[],function(){return window}),define("global/document",["global/window"],function(window){return window.document}),define("vjs",[s.src],function(videojs){return videojs}),require(["vjs"],function(videojs){orbp_w.videojs=videojs,orbp_w.runCmd()})):(s.readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,orbp_w.videojs=window.videojs,orbp_w.runCmd())}:s.onload=function(){orbp_w.videojs=window.videojs,orbp_w.runCmd()},t[0].parentNode.insertBefore(s,t[0]))}},"complete"===document.readyState?orbp_w.start():document.addEventListener("DOMContentLoaded",orbp_w.start())}(orbp_w);